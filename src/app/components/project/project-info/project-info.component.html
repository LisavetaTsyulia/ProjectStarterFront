<div class="container form-style">
  <h1 id="project_title">{{project.title}}</h1>
  <div class="row">
    <div class="col-md-8 col-xs-12 text-center">
      <img src="{{project.imageUrl}}" class="avatar img-thumbnail" alt="Project image">
    </div>
    <div class="col-md-4 col-xs-12">
      <h3>${{project.currentAmount}}</h3>
      <p>pledged of ${{project.targetAmount}} goal</p>
      <h3>371</h3>
      <p>backers</p>
      <h3>{{daysToGo}}</h3>
      <p>days to go</p>
      <button *ngIf="!isAnonymous()" class="btn btn-block" [class.btn-success]="!isSubscribed"
              [class.btn-default]="isSubscribed" (click)="subscribe()">
        <span *ngIf="isSubscribed"><span class="glyphicon glyphicon-heart pink"></span> Subscribed</span>
        <span *ngIf="!isSubscribed"><span class="glyphicon glyphicon-heart"></span> Subscribe</span>
      </button>
    </div>
  </div>
  <ul class="nav nav-tabs margin-top">
    <li class="active"><a href="#campaign" data-toggle="tab" aria-expanded="true">Campaign</a></li>
    <li class=""><a href="#rewards" data-toggle="tab" aria-expanded="false">Rewards</a></li>
    <li class=""><a href="#news" data-toggle="tab" aria-expanded="false">
      News <span class="label label-success">{{newsArray.length}}</span></a>
    </li>
    <li class=""><a href="#comments" data-toggle="tab" aria-expanded="false">
      Comments <span class="label label-success">{{commentsArray.length}}</span></a></li>
  </ul>
  <div id="tabContent" class="tab-content">
    <div class="tab-pane fade active in" id="campaign">
      <div class="row">
        <div class="col-md-8 col-xs-12">
          <h2>About this project</h2>
          <div class="margin-top description-block" id="description" [innerHTML]="project.description">
          </div>
        </div>
        <div class="col-md-4 col-xs-12">

          <h2>Project goals</h2>
          <div *ngFor="let goal of goalsArray">
            <app-goal-card [goal]="goal"
                           [progressBarValue]="project.currentAmount / goal.amount * 100">
            </app-goal-card>
          </div>

        </div>
      </div>
    </div>
    <div class="tab-pane fade" id="rewards">
      <div class="row col-md-5 ">
      <md-card class="my-card card margin-top ">
        <md-card-content class="card-block">
          <div class="row">
            <h4 class="col-md-12 text-center text-warning">Make a pledge without a reward</h4>
          </div>
          <div class="row">
            <div class="input-group">
              <span class="input-group-addon">$</span>
              <input type="text" class="form-control " id="donateAmount" placeholder="Amount" [(ngModel)]="amountOfReward" [ngModelOptions]="{standalone: true}">
            </div>
          </div>
        </md-card-content>
        <md-card-footer>
          <button class="btn btn-warning btn-block" (click)="onContinueAnySum(amountOfReward)">Continue</button>
        </md-card-footer>
      </md-card>
      </div>
      <div class="row col-md-12">
        <hr class="my_hr_style">
      </div>
      <div class="card-deck row">
        <div class=" margin-top" *ngFor="let reward of rewardsArray ">
          <app-rewards [reward]="reward" (pay)="onContinue($event)"></app-rewards>
        </div>
      </div>
    </div>
    <div class="tab-pane fade" id="news">
      <div class="col-md-6 col-md-offset-3">
        <div *ngIf="!showMoreNewsInfo">
          <div *ngFor="let news of newsArray; let i = index" (click)="showNews(news, newsArray.length - i)"
               class="margin-top">
            <md-card class="card margin-top">
              <md-card-header>
                <md-card-title><span class="text-warning">News #{{newsArray.length - i}}</span></md-card-title>
              </md-card-header>
              <md-card-content>
                <h3 class="card-title bold">{{news.title}} <a disabled="true"></a></h3>
              </md-card-content>
              <md-card-footer>
                <p class="text-right date">{{news.date | date}}</p>
              </md-card-footer>
            </md-card>
          </div>
        </div>
        <div *ngIf="showMoreNewsInfo">
          <app-news-info [news]="selectedNews" [newsNumber]="selectedNewsNumber"
                         (back)="showNewsList()"></app-news-info>
        </div>
      </div>
    </div>
    <div class="tab-pane fade" id="comments">
      <div class=" row col-md-8 col-md-offset-1">
        <div *ngFor="let comment of commentsArray "
             class="margin-top">
          <app-comment [comment]="comment"></app-comment>
        </div>
      </div>
      <div class=" row col-md-8 col-md-offset-1 margin-top">
        <input type="text" class="form-control margin-top" id="comment" placeholder="Comment"
               [(ngModel)]="newCommentText" [ngModelOptions]="{standalone: true}">
      </div>
      <div class=" row col-md-2 col-md-offset-7 margin-top">
        <button class="btn btn-success" *ngIf="!isAnonymous()" (click)="addComment()">
          <span class="glyphicon glyphicon-plus"></span> Add a comment
        </button>
      </div>
    </div>
  </div>
</div>
